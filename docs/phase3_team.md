# 🏗️(工事中)　Phase 3: チーム開発とコンフリクト (Day 11 - Day 13)

## 目的

**「他人の変更」と「自分の変更」を統合する作法**を学ぶ。
実際のチーム開発で必要なGitワークフローを習得する。

---

## Git チーム開発の基本フロー

```
main ─────────────────────────────────────────►
       │                              ▲
       │ branch                       │ merge
       ▼                              │
feature/xxx ──► commit ──► push ──► PR ──► review ──┘
```

---

## Day 11: Base App（共有資産）の解析

### 学習目標

- 他人が書いたコードを読み解く力を養う
- IPOカードを使って構造を理解する

### タスク

#### 1. Base Appの取得

`team_product/` フォルダに移動し、Base Appの構造を確認します。

```bash
cd team_product/
```

#### 2. コードリーディング

以下のファイルを読み、IPOカードに書き起こしてください：

**対象ファイル：**

- `src/server.js` - サーバーのメイン処理
- `src/public/index.html` - クライアント側のUI

#### 3. IPOカード作成

Base Appの各機能について、IPOカードを作成：

**機能1: アイテムの追加**
| 項目 | 内容 |
|------|------|
| **Input** | （ページを読み込む） |
| **Process** | （DBからitemを全件もらう） |
| **Output** | （item一覧の情報をJSON形式で出力する） |

**機能2: アイテムの一覧表示**
| 項目 | 内容 |
|------|------|
| **Input** | （クライアントからtitleを受け取る） |
| **Process** | （DBに新しいitemを保存する） |
| **Output** | （新しいitemをJSON形式で出力する） |

**機能3: アイテムの削除**
| 項目 | 内容 |
|------|------|
| **Input** | （/api/items/:idからidを受け取る） |
| **Process** | （idから一致するitemをDBから削除する） |
| **Output** | （"削除しました"を出力） |

#### 4. 構造図の作成

手書きで以下の図を作成してください：

```
┌─────────────┐           ┌─────────────┐             ┌─────────────┐
│   Client    │           │   Server    │             │  Database   │
│             │  req      │             │ query       │             │
│  index.html │ ─────►    │  server.js  │ ─────►      │  items.db   │
│             │ ◄─────    │             │ ◄─────      │             │
└─────────────┘   res     └─────────────┘ result      └─────────────┘
```

各矢印に「何が送られているか」を書き込む。

### 完了条件

- [ ] Base Appを起動して動作確認した
- [ ] 3つの機能のIPOカードを作成した
- [ ] 3層構造の図を手書きで作成した
- [ ] コードの流れを説明できる

---

## Day 12: コンフリクト演習

### 学習目標

- Gitコンフリクト（衝突）を体験する
- コンフリクトの解決方法を学ぶ

### 準備

チームメンバー全員で同じリポジトリを使います。

#### 1. ブランチ作成

各自が自分のブランチを作成：

```bash
# 例: 田中さんの場合
git checkout -b feature/tanaka-title

# 例: 鈴木さんの場合
git checkout -b feature/suzuki-title
```

#### 2. わざと衝突を起こす

**全員が同じファイルの同じ行を編集します。**

対象: `src/public/index.html` の `<h1>` タグ

```html
<!-- 田中さんの変更 -->
<h1>田中のリストアプリ</h1>

<!-- 鈴木さんの変更 -->
<h1>鈴木のタスク管理</h1>
```

#### 3. コミット＆プッシュ

```bash
git add src/public/index.html
git commit -m "feat: タイトルを変更"
git push -u origin feature/[自分の名前]-title
```

### コンフリクト解決演習

#### 1. 最初の人がマージ

最初にPRを出した人は、問題なくマージできます。

```bash
# GitHub上でPRを作成し、マージ
```

#### 2. 2番目以降の人がコンフリクト

2番目以降の人は、コンフリクトが発生します。

```bash
# 最新のmainを取得
git checkout main
git pull

# 自分のブランチに戻る
git checkout feature/[自分の名前]-title

# mainをマージしようとする
git merge main

# ★ここでコンフリクトが発生！
```

#### 3. コンフリクトの解決

コンフリクトが発生したファイルを開くと、以下のような表示になります：

```html
<<<<<<< HEAD
<h1>鈴木のタスク管理</h1>
=======
<h1>田中のリストアプリ</h1>
>>>>>>> main
```

**解決方法：**

1. チームで相談して、どちらを残すか決める
2. または、両方を活かした新しい内容にする
3. `<<<<<<< HEAD`、`=======`、`>>>>>>> main` の行を削除
4. 正しい内容だけを残す

```html
<!-- 例: チームで決めた内容 -->
<h1>チームAのリストアプリ</h1>
```

#### 4. 解決後のコミット

```bash
git add src/public/index.html
git commit -m "fix: コンフリクトを解決"
git push
```

### コンフリクト解決のコツ

| やること               | やってはいけないこと   |
| ---------------------- | ---------------------- |
| チームに相談する       | 勝手に相手の変更を消す |
| 両方の意図を理解する   | 自分の変更だけ残す     |
| テストしてからコミット | 確認せずにプッシュ     |

### 完了条件

- [ ] コンフリクトを体験した
- [ ] コンフリクトを解決できた
- [ ] なぜコンフリクトが起きたか説明できる

---

## Day 13: 小機能追加 (Branch & PR)

### 学習目標

- 安全に機能を追加するワークフローを学ぶ
- プルリクエスト（PR）とコードレビューを体験する

### Git ワークフロー

```
1. Issue作成 → 2. Branch作成 → 3. 実装 → 4. PR作成 → 5. Review → 6. Merge
```

### タスク

#### 1. Issue作成

GitHubで以下のようなIssueを作成：

```
タイトル: フッターに著作権表示を追加

説明:
- ページ下部にコピーライト表示を追加する
- チーム名と年を表示する
```

#### 2. ブランチ作成

```bash
# mainから新しいブランチを作成
git checkout main
git pull
git checkout -b feature/add-footer
```

#### 3. IPOカード作成

変更前に必ずIPOカードを書く：

| 項目        | 内容 |
| ----------- | ---- |
| **Input**   |      |
| **Process** |      |
| **Output**  |      |

#### 4. 実装

`src/public/index.html` にフッターを追加：

```html
<footer>
  <p>© 2024 チームA - AIネイティブ・ブートキャンプ</p>
</footer>
```

#### 5. コミット＆プッシュ

```bash
git add src/public/index.html
git commit -m "feat: フッターに著作権表示を追加

- チーム名と年を表示
- 関連Issue: #1"

git push -u origin feature/add-footer
```

#### 6. PR作成

GitHubでプルリクエストを作成：

```
タイトル: feat: フッターに著作権表示を追加

説明:
## 変更内容
- ページ下部にコピーライト表示を追加

## IPOカード
- Input: ページ読み込み時
- Process: HTMLに要素追加
- Output: フッターが表示される

## テスト方法
1. サーバー起動
2. ブラウザでアクセス
3. ページ下部にフッターが表示されることを確認

Closes #1
```

#### 7. コードレビュー

チームメンバーにレビューを依頼：

- レビュアーはコードを確認
- 問題があればコメント
- OKなら「Approve」

#### 8. マージ

レビューが承認されたら、PRをマージ：

```bash
# GitHub上で「Merge pull request」をクリック
# または
git checkout main
git merge feature/add-footer
git push
```

### PRのチェックリスト

- [ ] IPOカードを記載した
- [ ] コードに日本語コメントがある
- [ ] 動作確認の方法を書いた
- [ ] 関連Issueをリンクした

### 完了条件

- [ ] Issueを作成した
- [ ] ブランチを作成して実装した
- [ ] PRを作成した
- [ ] レビューを受けてマージした

---

## Phase 3 チェックリスト

| 日     | タスク                        | 完了 |
| ------ | ----------------------------- | ---- |
| Day 11 | Base Appの解析＆IPOカード作成 | [ ]  |
| Day 12 | コンフリクト演習              | [ ]  |
| Day 13 | 小機能追加（Branch & PR）     | [ ]  |

---

## チーム開発の心得

### やるべきこと

1. **こまめにコミット** - 大きな変更を一度にしない
2. **わかりやすいコミットメッセージ** - 何を変えたか明確に
3. **PRは小さく** - レビューしやすいサイズで
4. **コンフリクトは相談** - 勝手に解決しない

### やってはいけないこと

1. **mainに直接プッシュ** - 必ずブランチを切る
2. **レビューなしでマージ** - 必ず誰かに見てもらう
3. **他人の変更を勝手に消す** - 必ず相談する
4. **テストせずにプッシュ** - 動作確認してから

---

## 次のPhaseへ

Phase 3を完了したあなたは、以下を学びました：

- **他人のコードを読む力** - IPOカードで構造化して理解
- **コンフリクト解決** - 衝突は怖くない、相談して解決
- **PRワークフロー** - 安全に変更を統合する方法

Phase 4では、いよいよ**ハッカソン**です！
Base Appを独自のプロダクトに進化させましょう。
